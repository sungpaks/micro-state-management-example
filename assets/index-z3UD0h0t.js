import{r,j as e}from"./index-eUrfcj9a.js";import{B as i,R as x,E as d}from"./RenderCount-DJW6F-A1.js";import{s as o}from"./store-Bdmtnt4j.js";import{E as j}from"./ExampleLink-Y0lrhpVh.js";const c=(t,s)=>{const[n,u]=r.useState(()=>s(t.getState()));return r.useEffect(()=>t.subscribe(()=>{u(s(t.getState()))}),[t,s]),n},l=t=>t.count,a=t=>t.name,m=()=>{const t=c(o,l),s=()=>o.setState(n=>({...n,count:n.count+1}));return e.jsxs("div",{children:[t," ",e.jsx(i,{onClick:s,children:"+1"})]})},h=()=>{const t=c(o,l),s=()=>o.setState(n=>({...n,count:n.count+2}));return e.jsxs("div",{children:[t," ",e.jsx(i,{onClick:s,children:"+2"})]})},p=()=>{const t=c(o,a);return e.jsxs("div",{children:["STORE NAME: ",e.jsx("code",{className:"bg-amber-100",children:t})," ",e.jsx(x,{})]})};function S(){return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(h,{}),e.jsx(p,{}),e.jsx("img",{src:"https://i.imgur.com/gNLpZN5.png",alt:"useStoreSelector 커스텀훅 예제 코드"}),e.jsxs("p",{children:["필요한 값만을 골라 구독할 수 있는 ",e.jsx("code",{children:"useStoreSelector"})," 커스텀훅입니다.",e.jsx("br",{}),e.jsx("code",{children:"useStoreSelector"})," 커스텀훅은 전체 상태값이 아닌 ",e.jsx("code",{children:"selector"}),"함수의 반환값만을 상태로 유지합니다."]}),e.jsx("img",{src:"https://i.imgur.com/U8om5o3.png",alt:"useStoreSelector 커스텀훅 사용 예제"}),e.jsxs("p",{children:[e.jsx("code",{children:"selector"}),"함수는 컴포넌트 외부에 선언하거나 ",e.jsx("code",{children:"useCallback"}),"으로 감싸줍니다.",e.jsx("br",{}),"그렇지 않으면 컴포넌트가 렌더링될 때마다 매번 ",e.jsx("code",{children:"store"}),"를 새로 구독하게 됩니다."]}),e.jsx("br",{}),e.jsxs("p",{children:["이 구현에는 작은 문제가 있습니다: ",e.jsx("br",{}),e.jsx("code",{children:"store"}),"또는 ",e.jsx("code",{children:"selector"}),"가 변경된 경우, ",e.jsx("code",{children:"useEffect"}),"의 실행은 조금 뒤에 이루어지므로",e.jsx("br",{}),"재구독이 완료되기 전까지 stale한 상태값을 반환할 수 있다는 점입니다."]}),e.jsx("p",{children:"이를 직접 수정해볼 수 있지만, 기술적인 노력이 필요합니다. 대신 더 간단한 해결책을 다음 섹션에서 알아봅니다."}),e.jsx(j,{to:"/sharing-module-state-with-subscription/working-with-use-subscription",children:"다음"})]})}const k=function(){return e.jsx(d,{title:"Working with a selector",children:e.jsx(S,{})})};export{k as component};
